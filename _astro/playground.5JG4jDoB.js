import{l as at,k as ft}from"./preact.module.BW0qtBSs.js";import{d as nt,y as st,q as A,T as K}from"./hooks.module.DSNKsvNR.js";var dt=0;function f(s,i,p,d,D,g){i||(i={});var x,b,y=i;if("ref"in y)for(b in y={},i)b=="ref"?x=i[b]:y[b]=i[b];var a={type:s,props:y,key:p,ref:x,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--dt,__i:-1,__u:0,__source:D,__self:g};if(typeof s=="function"&&(x=s.defaultProps))for(b in x)y[b]===void 0&&(y[b]=x[b]);return at.vnode&&at.vnode(a),a}const V=({label:s,value:i,min:p=0,max:d=10,step:D=1,onChange:g})=>{const x=`slider-${s.replace(/\s+/g,"-").toLowerCase()}`,b=()=>g(Math.max(p,i-D)),y=()=>g(Math.min(d,i+D)),a=i>p,w=i<d;return f("div",{children:[f("label",{for:x,class:"block w-full text-sm",children:[s,": ",i]}),f("div",{class:"flex items-center gap-2",children:[f("button",{class:"w-8 h-8 flex justify-center items-center rounded-full bg-gray-200 hover:enabled:bg-blue-200 disabled:opacity-50","aria-label":"Decrease",disabled:!a,onClick:b,children:"−"}),f("input",{id:x,type:"range",min:p,max:d,step:D,value:i,onInput:m=>g(Number(m.currentTarget.value)),class:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),f("button",{class:"w-8 h-8 flex justify-center items-center rounded-full bg-gray-200 hover:enabled:bg-blue-200 disabled:opacity-50","aria-label":"Increase",disabled:!w,onClick:y,children:"＋"})]})]})},it=({enabled:s,onToggle:i,label:p})=>f("div",{class:"py-2 flex items-center gap-1",children:[p&&f("span",{class:"text-sm",children:[p,":"]}),f("button",{type:"button",role:"switch","aria-checked":s,"aria-label":p,onClick:()=>i(!s),class:`w-12 h-6 rounded-full px-1 flex items-center transition-colors ${s?"bg-blue-500":"bg-gray-200"}`,children:f("span",{class:`w-4 h-4 rounded-full bg-white transform transition-transform ${s?"translate-x-6":"translate-x-0"}`})})]});var ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mt(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ct={exports:{}};(function(s,i){(function(p,d){s.exports=d()})(ht,function(){var p=1e3,d=6e4,D=36e5,g="millisecond",x="second",b="minute",y="hour",a="day",w="week",m="month",j="quarter",Y="year",L="date",Z="Invalid Date",q=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,U=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,B={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(o){var r=["th","st","nd","rd"],t=o%100;return"["+o+(r[(t-20)%10]||r[t]||r[0])+"]"}},$=function(o,r,t){var n=String(o);return!n||n.length>=r?o:""+Array(r+1-n.length).join(t)+o},u={s:$,z:function(o){var r=-o.utcOffset(),t=Math.abs(r),n=Math.floor(t/60),e=t%60;return(r<=0?"+":"-")+$(n,2,"0")+":"+$(e,2,"0")},m:function o(r,t){if(r.date()<t.date())return-o(t,r);var n=12*(t.year()-r.year())+(t.month()-r.month()),e=r.clone().add(n,m),c=t-e<0,l=r.clone().add(n+(c?-1:1),m);return+(-(n+(t-e)/(c?e-l:l-e))||0)},a:function(o){return o<0?Math.ceil(o)||0:Math.floor(o)},p:function(o){return{M:m,y:Y,w,d:a,D:L,h:y,m:b,s:x,ms:g,Q:j}[o]||String(o||"").toLowerCase().replace(/s$/,"")},u:function(o){return o===void 0}},v="en",k={};k[v]=B;var S="$isDayjsObject",C=function(o){return o instanceof N||!(!o||!o[S])},W=function o(r,t,n){var e;if(!r)return v;if(typeof r=="string"){var c=r.toLowerCase();k[c]&&(e=c),t&&(k[c]=t,e=c);var l=r.split("-");if(!e&&l.length>1)return o(l[0])}else{var M=r.name;k[M]=r,e=M}return!n&&e&&(v=e),e||!n&&v},_=function(o,r){if(C(o))return o.clone();var t=typeof r=="object"?r:{};return t.date=o,t.args=arguments,new N(t)},h=u;h.l=W,h.i=C,h.w=function(o,r){return _(o,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var N=function(){function o(t){this.$L=W(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[S]=!0}var r=o.prototype;return r.parse=function(t){this.$d=function(n){var e=n.date,c=n.utc;if(e===null)return new Date(NaN);if(h.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var l=e.match(q);if(l){var M=l[2]-1||0,O=(l[7]||"0").substring(0,3);return c?new Date(Date.UTC(l[1],M,l[3]||1,l[4]||0,l[5]||0,l[6]||0,O)):new Date(l[1],M,l[3]||1,l[4]||0,l[5]||0,l[6]||0,O)}}return new Date(e)}(t),this.init()},r.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},r.$utils=function(){return h},r.isValid=function(){return this.$d.toString()!==Z},r.isSame=function(t,n){var e=_(t);return this.startOf(n)<=e&&e<=this.endOf(n)},r.isAfter=function(t,n){return _(t)<this.startOf(n)},r.isBefore=function(t,n){return this.endOf(n)<_(t)},r.$g=function(t,n,e){return h.u(t)?this[n]:this.set(e,t)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(t,n){var e=this,c=!!h.u(n)||n,l=h.p(t),M=function(J,I){var E=h.w(e.$u?Date.UTC(e.$y,I,J):new Date(e.$y,I,J),e);return c?E:E.endOf(a)},O=function(J,I){return h.w(e.toDate()[J].apply(e.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(I)),e)},T=this.$W,P=this.$M,F=this.$D,R="set"+(this.$u?"UTC":"");switch(l){case Y:return c?M(1,0):M(31,11);case m:return c?M(1,P):M(0,P+1);case w:var z=this.$locale().weekStart||0,G=(T<z?T+7:T)-z;return M(c?F-G:F+(6-G),P);case a:case L:return O(R+"Hours",0);case y:return O(R+"Minutes",1);case b:return O(R+"Seconds",2);case x:return O(R+"Milliseconds",3);default:return this.clone()}},r.endOf=function(t){return this.startOf(t,!1)},r.$set=function(t,n){var e,c=h.p(t),l="set"+(this.$u?"UTC":""),M=(e={},e[a]=l+"Date",e[L]=l+"Date",e[m]=l+"Month",e[Y]=l+"FullYear",e[y]=l+"Hours",e[b]=l+"Minutes",e[x]=l+"Seconds",e[g]=l+"Milliseconds",e)[c],O=c===a?this.$D+(n-this.$W):n;if(c===m||c===Y){var T=this.clone().set(L,1);T.$d[M](O),T.init(),this.$d=T.set(L,Math.min(this.$D,T.daysInMonth())).$d}else M&&this.$d[M](O);return this.init(),this},r.set=function(t,n){return this.clone().$set(t,n)},r.get=function(t){return this[h.p(t)]()},r.add=function(t,n){var e,c=this;t=Number(t);var l=h.p(n),M=function(P){var F=_(c);return h.w(F.date(F.date()+Math.round(P*t)),c)};if(l===m)return this.set(m,this.$M+t);if(l===Y)return this.set(Y,this.$y+t);if(l===a)return M(1);if(l===w)return M(7);var O=(e={},e[b]=d,e[y]=D,e[x]=p,e)[l]||1,T=this.$d.getTime()+t*O;return h.w(T,this)},r.subtract=function(t,n){return this.add(-1*t,n)},r.format=function(t){var n=this,e=this.$locale();if(!this.isValid())return e.invalidDate||Z;var c=t||"YYYY-MM-DDTHH:mm:ssZ",l=h.z(this),M=this.$H,O=this.$m,T=this.$M,P=e.weekdays,F=e.months,R=e.meridiem,z=function(I,E,Q,tt){return I&&(I[E]||I(n,c))||Q[E].slice(0,tt)},G=function(I){return h.s(M%12||12,I,"0")},J=R||function(I,E,Q){var tt=I<12?"AM":"PM";return Q?tt.toLowerCase():tt};return c.replace(U,function(I,E){return E||function(Q){switch(Q){case"YY":return String(n.$y).slice(-2);case"YYYY":return h.s(n.$y,4,"0");case"M":return T+1;case"MM":return h.s(T+1,2,"0");case"MMM":return z(e.monthsShort,T,F,3);case"MMMM":return z(F,T);case"D":return n.$D;case"DD":return h.s(n.$D,2,"0");case"d":return String(n.$W);case"dd":return z(e.weekdaysMin,n.$W,P,2);case"ddd":return z(e.weekdaysShort,n.$W,P,3);case"dddd":return P[n.$W];case"H":return String(M);case"HH":return h.s(M,2,"0");case"h":return G(1);case"hh":return G(2);case"a":return J(M,O,!0);case"A":return J(M,O,!1);case"m":return String(O);case"mm":return h.s(O,2,"0");case"s":return String(n.$s);case"ss":return h.s(n.$s,2,"0");case"SSS":return h.s(n.$ms,3,"0");case"Z":return l}return null}(I)||l.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(t,n,e){var c,l=this,M=h.p(n),O=_(t),T=(O.utcOffset()-this.utcOffset())*d,P=this-O,F=function(){return h.m(l,O)};switch(M){case Y:c=F()/12;break;case m:c=F();break;case j:c=F()/3;break;case w:c=(P-T)/6048e5;break;case a:c=(P-T)/864e5;break;case y:c=P/D;break;case b:c=P/d;break;case x:c=P/p;break;default:c=P}return e?c:h.a(c)},r.daysInMonth=function(){return this.endOf(m).$D},r.$locale=function(){return k[this.$L]},r.locale=function(t,n){if(!t)return this.$L;var e=this.clone(),c=W(t,n,!0);return c&&(e.$L=c),e},r.clone=function(){return h.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},o}(),X=N.prototype;return _.prototype=X,[["$ms",g],["$s",x],["$m",b],["$H",y],["$W",a],["$M",m],["$y",Y],["$D",L]].forEach(function(o){X[o[1]]=function(r){return this.$g(r,o[0],o[1])}}),_.extend=function(o,r){return o.$i||(o(r,N,_),o.$i=!0),_},_.locale=W,_.isDayjs=C,_.unix=function(o){return _(1e3*o)},_.en=k[v],_.Ls=k,_.p={},_})})(ct);var $t=ct.exports;const et=mt($t),yt=3e4,pt=()=>{const[s,i]=nt(!1),[p,d]=nt("");st(()=>{const g=localStorage.getItem("lastKofiPrompt");if(!g||et().diff(et(g),"day")>=3){const x=setTimeout(()=>{i(!0),localStorage.setItem("lastKofiPrompt",et().format("YYYYMMDD"))},yt);return()=>clearTimeout(x)}},[]),st(()=>{d(s?"translate-y-0 opacity-100":"translate-y-2 opacity-0")},[s]);const D=A(()=>{window.open("https://ko-fi.com/mk_tiling","_blank"),i(!1)},[]);return s?f("div",{class:`absolute bottom-4 right-4 transition-all duration-50 ${p}`,children:f("button",{class:"h-10 flex justify-center items-center rounded-full border md:border-2 border-neutral-900 bg-white px-3 text-neutral-900 hover:enabled:bg-blue-500 hover:enabled:text-white",onClick:D,children:["Enjoying exploring?",f("span",{class:"ml-1 font-bold",children:"Support on Ko-fi!"})]})}):null},lt=(s,i)=>s%i?lt(i,s%i):i,H=(s,i=0)=>Array.from({length:s},(p,d)=>i+d),gt=({x:s,y:i})=>`l${s.toFixed(4)} ${i.toFixed(4)}`,bt=({x:s,y:i,r:p,sweep:d=!1})=>`a${p.toFixed(4)} ${p.toFixed(4)} 0 0 ${d?1:0} ${s.toFixed(4)} ${i.toFixed(4)}`,rt=(s,i)=>`translate(${s.toFixed(4)} ${i.toFixed(4)})`,vt=s=>`rotate(${s.toFixed(4)})`,xt=({m:s,k:i,n:p,offset:d,arc:D,unit:g,layer:x})=>{const b=lt(s,i),y=s/b,a=i/b,w=p/b,m=K(()=>H(w).map(u=>g*Math.cos(2*Math.PI*u/w)),[w,g]),j=K(()=>H(w).map(u=>g*Math.sin(2*Math.PI*u/w)),[w,g]),Y=K(()=>H(a).map(u=>m[u]).reduce((u,v)=>u+v),[a,m]),L=K(()=>H(a).map(u=>j[u]).reduce((u,v)=>u+v),[a,j]),Z=K(()=>m[a]-m[0],[a,m]),q=K(()=>j[a]-j[0],[a,j]),U=g/2/Math.sin(y*Math.PI/w),B=K(()=>{const u=D?bt:gt;return[...H(a).map(v=>u({x:m[v*y%a],y:j[v*y%a],r:U,sweep:!0})),u({x:m[a],y:j[a],r:U,sweep:!0}),u({x:-m[0],y:-j[0],r:U}),...H(a-1,1).map(v=>u({x:-m[(a-v)*y%a],y:-j[(a-v)*y%a],r:U})),u({x:-m[a],y:-j[a],r:U})].join("")},[y,a,D,m,j,U]),$=A(u=>{const v=H(a).findIndex(k=>k*y%a==u%a);return H(v>=0?v:0).reduce(({x:k,y:S},C)=>({x:k+m[((C*y+a-u%a)%a+u)%w],y:S+j[((C*y+a-u%a)%a+u)%w]}),{x:0,y:0})},[y,a,w,m,j]);return f(ft,{children:[f("div",{class:"relative -mx-4 md:mx-0 mb-1 md:mb-2",children:[f("svg",{viewBox:"-400 -400 800 800",class:"w-full h-auto",children:[f("rect",{x:"-400",y:"-400",width:"800",height:"800",class:"fill-blue-50"}),f("defs",{children:[f("path",{id:"prototile",d:`M0 0${B}z`}),f("g",{id:"wedge",children:H(x).map(u=>H(u+1).map(v=>f("g",{transform:rt(u*Y+v*Z,u*L+v*q),children:f("use",{href:"#prototile"})})))})]}),f("g",{class:"stroke-2 stroke-neutral-900 fill-white","stroke-linejoin":"round",transform:`scale(1 -1) ${rt(d?-g/2:0,0)}`,children:H(w).map(u=>{const{sx:v,sy:k}=(()=>{if(d&&2*u>=w){const{x:S,y:C}=$(u-w/2);return{sx:g-S,sy:-C}}else{const{x:S,y:C}=$(u);return{sx:S,sy:C}}})();return f("g",{transform:`${rt(v,k)} ${vt(360*u/w)}`,children:f("use",{href:"#wedge",class:"hover:fill-blue-500"})})})})]}),f(pt,{})]}),f("div",{class:"text-center mb-1 md:mb-2",children:["(m, k, n) = (",s,", ",i,", ",p,")",b>1&&"*"]})]})},ot={k:[2,50],t:[2,10],unit:[5,50,5],layer:[1,10]},ut=(s,i,p,d)=>i<=s&&s<=p&&(d==null||d>0&&(s-i)%d==0),Mt=()=>{const[s,i]=nt({m:3,k:7,t:2,offset:!1,arc:!1,unit:20,layer:3}),p=A($=>{const{m:u,k:v,t:k,offset:S,arc:C,unit:W,layer:_}=$,h=new URLSearchParams(Object.fromEntries(Object.entries({m:u,k:v,t:k,offset:S,arc:C,unit:W,layer:_}).filter(N=>N[1]!=null).map(([N,X])=>[N,X.toString()]))).toString();h!==location.hash&&history.replaceState(null,"",`#${h}`)},[]);st(()=>{const $=location.hash.replace(/^#/,""),{m:u,...v}=Object.fromEntries(new URLSearchParams($).entries()),k=Object.fromEntries(Object.entries(v).map(([S,C])=>{if(["offset","arc"].includes(S))return["true","false"].includes(C)?[S,C==="true"]:void 0;if(!Object.keys(ot).includes(S)||!C.match(/\d+/))return null;const W=Number(C),[_,h,N]=ot[S];return ut(W,_,h,N)?[S,W]:null}).filter(S=>S!=null));if(u?.match(/\d+/)){const S=Number(u);ut(S,1,(k.k??s.k)-1)&&(k.m=S)}Object.keys(k).length>0&&i(S=>({...S,...k})),p(k)},[]);const d=A($=>{i(v=>({...v,...$}));const u=location.hash.replace(/^#/,"");p(Object.fromEntries([...new URLSearchParams(u).entries(),...Object.entries($)]))},[]),{m:D,k:g,t:x,offset:b,arc:y,unit:a,layer:w}=s,m=b?2*(x*g-D):x*g,j=A($=>{$<g&&d({m:$})},[g]),Y=A($=>{D>=$?d({m:$-1,k:$}):d({k:$})},[D]),L=A($=>{d({t:$})},[]),Z=A($=>{d({offset:$})},[]),q=A($=>{d({arc:$})},[]),U=A($=>{d({unit:$})},[]),B=A($=>{d({layer:$})},[]);return{m:D,k:g,t:x,n:m,offset:b,arc:y,unit:a,layer:w,setM:j,setK:Y,setT:L,setOffset:Z,setArc:q,setUnit:U,setLayer:B}},_t=()=>{const{m:s,k:i,t:p,n:d,offset:D,arc:g,unit:x,layer:b,setM:y,setK:a,setT:w,setOffset:m,setArc:j,setUnit:Y,setLayer:L}=Mt();return f("div",{children:[f(xt,{m:s,k:i,n:d,offset:D,arc:g,unit:x,layer:b}),f("div",{class:"flex flex-col items-center",children:f("div",{class:"w-full max-w-[480px] flex flex-col gap-1 md:gap-2",children:[f(V,{label:"m",value:s,min:1,max:i-1,onChange:y}),f(V,{label:"k",value:i,min:2,max:50,onChange:a}),f(V,{label:"t",value:p,min:2,max:10,onChange:w}),f("div",{class:"w-full flex justify-evenly",children:[f(it,{label:"offset",enabled:D,onToggle:m}),f(it,{label:"arc",enabled:g,onToggle:j})]}),f("hr",{class:"my-1 md:my-2"}),f(V,{label:"unit",value:x,min:5,max:50,step:5,onChange:Y}),f(V,{label:"layer",value:b,min:1,max:10,onChange:L})]})})]})};export{_t as Playground};
