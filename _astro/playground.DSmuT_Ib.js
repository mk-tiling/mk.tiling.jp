import{l as at,k as ft}from"./preact.module.IXEx8GmD.js";import{d as et,y as st,q as P,T as W}from"./hooks.module.Bgg2LTvM.js";var dt=0;function u(a,c,h,g,_,$){c||(c={});var M,b,d=c;if("ref"in d)for(b in d={},c)b=="ref"?M=c[b]:d[b]=c[b];var r={type:a,props:d,key:h,ref:M,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--dt,__i:-1,__u:0,__source:_,__self:$};if(typeof a=="function"&&(M=a.defaultProps))for(b in M)d[b]===void 0&&(d[b]=M[b]);return at.vnode&&at.vnode(r),r}const V=({label:a,value:c,min:h=0,max:g=10,step:_=1,onChange:$})=>{const M=`slider-${a.replace(/\s+/g,"-").toLowerCase()}`,b=()=>$(Math.max(h,c-_)),d=()=>$(Math.min(g,c+_)),r=c>h,w=c<g;return u("div",{children:[u("label",{for:M,className:"block w-full text-sm",children:[a,": ",c]}),u("div",{className:"flex items-center gap-2",children:[u("button",{className:"w-8 h-8 flex justify-center items-center rounded-full bg-gray-200 hover:enabled:bg-blue-200 disabled:opacity-50","aria-label":"Decrease",disabled:!r,onClick:b,children:"−"}),u("input",{id:M,type:"range",min:h,max:g,step:_,value:c,onInput:v=>$(Number(v.currentTarget.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),u("button",{className:"w-8 h-8 flex justify-center items-center rounded-full bg-gray-200 hover:enabled:bg-blue-200 disabled:opacity-50","aria-label":"Increase",disabled:!w,onClick:d,children:"＋"})]})]})},it=({enabled:a,onToggle:c,label:h})=>u("div",{className:"py-2 flex items-center gap-1",children:[h&&u("span",{className:"text-sm",children:[h,":"]}),u("button",{type:"button",role:"switch","aria-checked":a,"aria-label":h,onClick:()=>c(!a),className:`w-12 h-6 rounded-full px-1 flex items-center transition-colors ${a?"bg-blue-500":"bg-gray-200"}`,children:u("span",{className:`w-4 h-4 rounded-full bg-white transform transition-transform ${a?"translate-x-6":"translate-x-0"}`})})]});var ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mt(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var ut={exports:{}};(function(a,c){(function(h,g){a.exports=g()})(ht,function(){var h=1e3,g=6e4,_=36e5,$="millisecond",M="second",b="minute",d="hour",r="day",w="week",v="month",k="quarter",C="year",I="date",H="Invalid Date",X=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,q={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(o){var e=["th","st","nd","rd"],t=o%100;return"["+o+(e[(t-20)%10]||e[t]||e[0])+"]"}},U=function(o,e,t){var i=String(o);return!i||i.length>=e?o:""+Array(e+1-i.length).join(t)+o},J={s:U,z:function(o){var e=-o.utcOffset(),t=Math.abs(e),i=Math.floor(t/60),n=t%60;return(e<=0?"+":"-")+U(i,2,"0")+":"+U(n,2,"0")},m:function o(e,t){if(e.date()<t.date())return-o(t,e);var i=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(i,v),l=t-n<0,f=e.clone().add(i+(l?-1:1),v);return+(-(i+(t-n)/(l?n-f:f-n))||0)},a:function(o){return o<0?Math.ceil(o)||0:Math.floor(o)},p:function(o){return{M:v,y:C,w,d:r,D:I,h:d,m:b,s:M,ms:$,Q:k}[o]||String(o||"").toLowerCase().replace(/s$/,"")},u:function(o){return o===void 0}},x="en",s={};s[x]=q;var m="$isDayjsObject",N=function(o){return o instanceof A||!(!o||!o[m])},S=function o(e,t,i){var n;if(!e)return x;if(typeof e=="string"){var l=e.toLowerCase();s[l]&&(n=l),t&&(s[l]=t,n=l);var f=e.split("-");if(!n&&f.length>1)return o(f[0])}else{var D=e.name;s[D]=e,n=D}return!i&&n&&(x=n),n||!i&&x},y=function(o,e){if(N(o))return o.clone();var t=typeof e=="object"?e:{};return t.date=o,t.args=arguments,new A(t)},p=J;p.l=S,p.i=N,p.w=function(o,e){return y(o,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var A=function(){function o(t){this.$L=S(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[m]=!0}var e=o.prototype;return e.parse=function(t){this.$d=function(i){var n=i.date,l=i.utc;if(n===null)return new Date(NaN);if(p.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var f=n.match(X);if(f){var D=f[2]-1||0,O=(f[7]||"0").substring(0,3);return l?new Date(Date.UTC(f[1],D,f[3]||1,f[4]||0,f[5]||0,f[6]||0,O)):new Date(f[1],D,f[3]||1,f[4]||0,f[5]||0,f[6]||0,O)}}return new Date(n)}(t),this.init()},e.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},e.$utils=function(){return p},e.isValid=function(){return this.$d.toString()!==H},e.isSame=function(t,i){var n=y(t);return this.startOf(i)<=n&&n<=this.endOf(i)},e.isAfter=function(t,i){return y(t)<this.startOf(i)},e.isBefore=function(t,i){return this.endOf(i)<y(t)},e.$g=function(t,i,n){return p.u(t)?this[i]:this.set(n,t)},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(t,i){var n=this,l=!!p.u(i)||i,f=p.p(t),D=function(z,L){var R=p.w(n.$u?Date.UTC(n.$y,L,z):new Date(n.$y,L,z),n);return l?R:R.endOf(r)},O=function(z,L){return p.w(n.toDate()[z].apply(n.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(L)),n)},T=this.$W,E=this.$M,F=this.$D,Z="set"+(this.$u?"UTC":"");switch(f){case C:return l?D(1,0):D(31,11);case v:return l?D(1,E):D(0,E+1);case w:var K=this.$locale().weekStart||0,G=(T<K?T+7:T)-K;return D(l?F-G:F+(6-G),E);case r:case I:return O(Z+"Hours",0);case d:return O(Z+"Minutes",1);case b:return O(Z+"Seconds",2);case M:return O(Z+"Milliseconds",3);default:return this.clone()}},e.endOf=function(t){return this.startOf(t,!1)},e.$set=function(t,i){var n,l=p.p(t),f="set"+(this.$u?"UTC":""),D=(n={},n[r]=f+"Date",n[I]=f+"Date",n[v]=f+"Month",n[C]=f+"FullYear",n[d]=f+"Hours",n[b]=f+"Minutes",n[M]=f+"Seconds",n[$]=f+"Milliseconds",n)[l],O=l===r?this.$D+(i-this.$W):i;if(l===v||l===C){var T=this.clone().set(I,1);T.$d[D](O),T.init(),this.$d=T.set(I,Math.min(this.$D,T.daysInMonth())).$d}else D&&this.$d[D](O);return this.init(),this},e.set=function(t,i){return this.clone().$set(t,i)},e.get=function(t){return this[p.p(t)]()},e.add=function(t,i){var n,l=this;t=Number(t);var f=p.p(i),D=function(E){var F=y(l);return p.w(F.date(F.date()+Math.round(E*t)),l)};if(f===v)return this.set(v,this.$M+t);if(f===C)return this.set(C,this.$y+t);if(f===r)return D(1);if(f===w)return D(7);var O=(n={},n[b]=g,n[d]=_,n[M]=h,n)[f]||1,T=this.$d.getTime()+t*O;return p.w(T,this)},e.subtract=function(t,i){return this.add(-1*t,i)},e.format=function(t){var i=this,n=this.$locale();if(!this.isValid())return n.invalidDate||H;var l=t||"YYYY-MM-DDTHH:mm:ssZ",f=p.z(this),D=this.$H,O=this.$m,T=this.$M,E=n.weekdays,F=n.months,Z=n.meridiem,K=function(L,R,Q,tt){return L&&(L[R]||L(i,l))||Q[R].slice(0,tt)},G=function(L){return p.s(D%12||12,L,"0")},z=Z||function(L,R,Q){var tt=L<12?"AM":"PM";return Q?tt.toLowerCase():tt};return l.replace(Y,function(L,R){return R||function(Q){switch(Q){case"YY":return String(i.$y).slice(-2);case"YYYY":return p.s(i.$y,4,"0");case"M":return T+1;case"MM":return p.s(T+1,2,"0");case"MMM":return K(n.monthsShort,T,F,3);case"MMMM":return K(F,T);case"D":return i.$D;case"DD":return p.s(i.$D,2,"0");case"d":return String(i.$W);case"dd":return K(n.weekdaysMin,i.$W,E,2);case"ddd":return K(n.weekdaysShort,i.$W,E,3);case"dddd":return E[i.$W];case"H":return String(D);case"HH":return p.s(D,2,"0");case"h":return G(1);case"hh":return G(2);case"a":return z(D,O,!0);case"A":return z(D,O,!1);case"m":return String(O);case"mm":return p.s(O,2,"0");case"s":return String(i.$s);case"ss":return p.s(i.$s,2,"0");case"SSS":return p.s(i.$ms,3,"0");case"Z":return f}return null}(L)||f.replace(":","")})},e.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},e.diff=function(t,i,n){var l,f=this,D=p.p(i),O=y(t),T=(O.utcOffset()-this.utcOffset())*g,E=this-O,F=function(){return p.m(f,O)};switch(D){case C:l=F()/12;break;case v:l=F();break;case k:l=F()/3;break;case w:l=(E-T)/6048e5;break;case r:l=(E-T)/864e5;break;case d:l=E/_;break;case b:l=E/g;break;case M:l=E/h;break;default:l=E}return n?l:p.a(l)},e.daysInMonth=function(){return this.endOf(v).$D},e.$locale=function(){return s[this.$L]},e.locale=function(t,i){if(!t)return this.$L;var n=this.clone(),l=S(t,i,!0);return l&&(n.$L=l),n},e.clone=function(){return p.w(this.$d,this)},e.toDate=function(){return new Date(this.valueOf())},e.toJSON=function(){return this.isValid()?this.toISOString():null},e.toISOString=function(){return this.$d.toISOString()},e.toString=function(){return this.$d.toUTCString()},o}(),B=A.prototype;return y.prototype=B,[["$ms",$],["$s",M],["$m",b],["$H",d],["$W",r],["$M",v],["$y",C],["$D",I]].forEach(function(o){B[o[1]]=function(e){return this.$g(e,o[0],o[1])}}),y.extend=function(o,e){return o.$i||(o(e,A,y),o.$i=!0),y},y.locale=S,y.isDayjs=N,y.unix=function(o){return y(1e3*o)},y.en=s[x],y.Ls=s,y.p={},y})})(ut);var pt=ut.exports;const nt=mt(pt),yt=3e4,$t=()=>{const[a,c]=et(!1),[h,g]=et("");st(()=>{const $=localStorage.getItem("lastKofiPrompt");if(!$||nt().diff(nt($),"day")>=3){const M=setTimeout(()=>{c(!0),localStorage.setItem("lastKofiPrompt",nt().format("YYYYMMDD"))},yt);return()=>{clearTimeout(M)}}},[]),st(()=>{g(a?"translate-y-0 opacity-100":"translate-y-2 opacity-0")},[a]);const _=P(()=>{window.open("https://ko-fi.com/mk_tiling","_blank"),c(!1)},[]);return a?u("div",{className:`absolute bottom-4 right-4 transition-all duration-50 ${h}`,children:u("button",{className:"h-10 flex justify-center items-center rounded-full border md:border-2 border-neutral-900 bg-white px-3 text-neutral-900 hover:enabled:bg-blue-500 hover:enabled:text-white",onClick:_,children:["Enjoying exploring?",u("span",{className:"ml-1 font-bold",children:"Support on Ko-fi!"})]})}):null};function gt(a,c,h="application/octet-stream"){const g=new Blob([a],{type:h}),_=URL.createObjectURL(g),$=document.createElement("a");$.href=_,$.download=c,$.style.display="none",document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(_)}const bt=`0
SECTION
2
HEADER
0
ENDSEC
0
SECTION
2
TABLES
0
ENDSEC
0
SECTION
2
BLOCKS
0
ENDSEC
0
SECTION
2
ENTITIES`,xt=`0
ENDSEC
0
EOF`;function vt(a){return[bt,"0","LWPOLYLINE","8","0","90",`${a.length}`,"70","1",...a.map(([h,g])=>["10",h.toFixed(6),"20",g.toFixed(6)]).flat(),xt].join(`
`)}const lt=(a,c)=>a%c?lt(c,a%c):c,j=(a,c=0)=>Array.from({length:a},(h,g)=>c+g),Mt=({x:a,y:c})=>`l${a.toFixed(4)} ${c.toFixed(4)}`,wt=({x:a,y:c,r:h,sweep:g=!1})=>`a${h.toFixed(4)} ${h.toFixed(4)} 0 0 ${g?1:0} ${a.toFixed(4)} ${c.toFixed(4)}`,rt=(a,c)=>`translate(${a.toFixed(4)} ${c.toFixed(4)})`,St=a=>`rotate(${a.toFixed(4)})`,Dt=({m:a,k:c,n:h,offset:g,arc:_,unit:$,layer:M})=>{const b=lt(a,c),d=a/b,r=c/b,w=h/b,v=W(()=>j(w).map(s=>Math.cos(2*Math.PI*s/w)),[w]),k=W(()=>j(w).map(s=>Math.sin(2*Math.PI*s/w)),[w]),C=W(()=>j(r).map(s=>v[s]).reduce((s,m)=>s+m),[r,v]),I=W(()=>j(r).map(s=>k[s]).reduce((s,m)=>s+m),[r,k]),H=W(()=>v[r]-v[0],[r,v]),X=W(()=>k[r]-k[0],[r,k]),Y=.5/Math.sin(d*Math.PI/w),q=W(()=>{const s=_?wt:Mt;return[...j(r).map(m=>s({x:v[m*d%r],y:k[m*d%r],r:Y,sweep:!0})),s({x:v[r],y:k[r],r:Y,sweep:!0}),s({x:-v[0],y:-k[0],r:Y}),...j(r-1,1).map(m=>s({x:-v[(r-m)*d%r],y:-k[(r-m)*d%r],r:Y})),s({x:-v[r],y:-k[r],r:Y})].join("")},[d,r,_,v,k,Y]),U=P(s=>{const m=j(r).findIndex(N=>N*d%r==s%r);return j(m>=0?m:0).reduce(({x:N,y:S},y)=>({x:N+v[((y*d+r-s%r)%r+s)%w],y:S+k[((y*d+r-s%r)%r+s)%w]}),{x:0,y:0})},[d,r,w,v,k]),J=W(()=>{const s=2*Math.PI/w;return[...j(r).map(m=>[Math.cos(m*d%r*s),Math.sin(m*d%r*s)]),[Math.cos(r*s),Math.sin(r*s)],[-1,0],...j(r-1,1).map(m=>[-Math.cos((r-m)*d%r*s),-Math.sin((r-m)*d%r*s)])].reduce((m,[N,S])=>{const[y,p]=m.at(-1);return[...m,[y+N,p+S]]},[[0,0]])},[d,r,w]),x=P(()=>{gt(vt(J),"tile.dxf","application/dxf")},[J]);return u(ft,{children:[u("div",{className:"relative -mx-4 md:mx-0 mb-1 md:mb-2",children:[u("svg",{viewBox:"-400 -400 800 800",className:"w-full h-auto",children:[u("rect",{x:"-400",y:"-400",width:"800",height:"800",className:"fill-blue-50"}),u("defs",{children:[u("path",{id:"prototile",d:`M0 0${q}z`,"vector-effect":"non-scaling-stroke"}),u("g",{id:"wedge",children:j(M).map(s=>j(s+1).map(m=>u("g",{transform:rt(s*C+m*H,s*I+m*X),children:u("use",{href:"#prototile"})})))})]}),u("g",{className:"stroke-2 stroke-neutral-900 fill-white","stroke-linejoin":"round",transform:`scale(${$}) scale(1 -1) ${rt(g?-.5:0,0)}`,children:j(w).map(s=>{const{sx:m,sy:N}=(()=>{if(g&&2*s>=w){const{x:S,y}=U(s-w/2);return{sx:1-S,sy:-y}}else{const{x:S,y}=U(s);return{sx:S,sy:y}}})();return u("g",{transform:`${rt(m,N)} ${St(360*s/w)}`,children:u("use",{href:"#wedge",className:"hover:fill-blue-500"})})})})]}),u($t,{})]}),u("div",{className:"relative mb-1 md:mb-2 flex justify-center items-center",children:[u("span",{children:["(m, k, n) = (",a,", ",c,", ",h,")",b>1&&"*"]}),u("a",{className:"absolute right-0 px-1 cursor-pointer hidden md:inline",onClick:x,children:"DXF"})]})]})},ot={k:[2,50],t:[2,10],unit:[5,50,5],layer:[1,10]},ct=(a,c,h,g)=>c<=a&&a<=h&&(g==null||g>0&&(a-c)%g==0),_t=()=>{const[a,c]=et(!0),[h,g]=et({m:3,k:7,t:2,offset:!1,arc:!1,unit:20,layer:3}),_=P(x=>{const{m:s,k:m,t:N,offset:S,arc:y,unit:p,layer:A}=x,B=new URLSearchParams(Object.fromEntries(Object.entries({m:s,k:m,t:N,offset:S,arc:y,unit:p,layer:A}).filter(o=>o[1]!=null).map(([o,e])=>[o,e.toString()]))).toString();B!==location.hash&&history.replaceState(null,"",`#${B}`)},[]);st(()=>{const x=location.hash.replace(/^#/,""),{m:s,...m}=Object.fromEntries(new URLSearchParams(x).entries()),N=Object.fromEntries(Object.entries(m).map(([S,y])=>{if(["offset","arc"].includes(S))return["true","false"].includes(y)?[S,y==="true"]:void 0;if(!Object.keys(ot).includes(S)||!y.match(/\d+/))return null;const p=Number(y),[A,B,o]=ot[S];return ct(p,A,B,o)?[S,p]:null}).filter(S=>S!=null));if(s?.match(/\d+/)){const S=Number(s);ct(S,1,(N.k??h.k)-1)&&(N.m=S)}Object.keys(N).length>0&&g(S=>({...S,...N})),_(N),c(!1)},[]);const $=P(x=>{g(m=>({...m,...x}));const s=location.hash.replace(/^#/,"");_(Object.fromEntries([...new URLSearchParams(s).entries(),...Object.entries(x)]))},[]),{m:M,k:b,t:d,offset:r,arc:w,unit:v,layer:k}=h,C=r?2*(d*b-M):d*b,I=P(x=>{x<b&&$({m:x})},[b]),H=P(x=>{M>=x?$({m:x-1,k:x}):$({k:x})},[M]),X=P(x=>{$({t:x})},[]),Y=P(x=>{$({offset:x})},[]),q=P(x=>{$({arc:x})},[]),U=P(x=>{$({unit:x})},[]),J=P(x=>{$({layer:x})},[]);return{isLoading:a,m:M,k:b,t:d,n:C,offset:r,arc:w,unit:v,layer:k,setM:I,setK:H,setT:X,setOffset:Y,setArc:q,setUnit:U,setLayer:J}},Nt=()=>{const{isLoading:a,m:c,k:h,t:g,n:_,offset:$,arc:M,unit:b,layer:d,setM:r,setK:w,setT:v,setOffset:k,setArc:C,setUnit:I,setLayer:H}=_t();return a?u("div",{children:"Loading..."}):u("div",{children:[u(Dt,{m:c,k:h,n:_,offset:$,arc:M,unit:b,layer:d}),u("div",{className:"flex flex-col items-center",children:u("div",{className:"w-full max-w-[480px] flex flex-col gap-1 md:gap-2",children:[u(V,{label:"m",value:c,min:1,max:h-1,onChange:r}),u(V,{label:"k",value:h,min:2,max:50,onChange:w}),u(V,{label:"t",value:g,min:2,max:10,onChange:v}),u("div",{className:"w-full flex justify-evenly",children:[u(it,{label:"offset",enabled:$,onToggle:k}),u(it,{label:"arc",enabled:M,onToggle:C})]}),u("hr",{className:"my-1 md:my-2"}),u(V,{label:"unit",value:b,min:5,max:50,step:5,onChange:I}),u(V,{label:"layer",value:d,min:1,max:10,onChange:H})]})})]})};export{Nt as Playground};
