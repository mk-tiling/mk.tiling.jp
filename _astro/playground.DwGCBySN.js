import{l as at,k as ft}from"./preact.module.BW0qtBSs.js";import{d as rt,y as st,q as Y,T as W}from"./hooks.module.DSNKsvNR.js";var dt=0;function l(s,o,$,h,D,m){o||(o={});var w,v,p=o;if("ref"in p)for(v in p={},o)v=="ref"?w=o[v]:p[v]=o[v];var r={type:s,props:p,key:$,ref:w,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--dt,__i:-1,__u:0,__source:D,__self:m};if(typeof s=="function"&&(w=s.defaultProps))for(v in w)p[v]===void 0&&(p[v]=w[v]);return at.vnode&&at.vnode(r),r}const Q=({label:s,value:o,min:$=0,max:h=10,step:D=1,onChange:m})=>{const w=`slider-${s.replace(/\s+/g,"-").toLowerCase()}`,v=()=>m(Math.max($,o-D)),p=()=>m(Math.min(h,o+D)),r=o>$,M=o<h;return l("div",{children:[l("label",{for:w,class:"block w-full text-sm",children:[s,": ",o]}),l("div",{class:"flex items-center gap-2",children:[l("button",{class:"w-8 h-8 flex justify-center items-center rounded-full bg-gray-200 hover:enabled:bg-blue-200 disabled:opacity-50","aria-label":"Decrease",disabled:!r,onClick:v,children:"−"}),l("input",{id:w,type:"range",min:$,max:h,step:D,value:o,onInput:g=>m(Number(g.currentTarget.value)),class:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),l("button",{class:"w-8 h-8 flex justify-center items-center rounded-full bg-gray-200 hover:enabled:bg-blue-200 disabled:opacity-50","aria-label":"Increase",disabled:!M,onClick:p,children:"＋"})]})]})},it=({enabled:s,onToggle:o,label:$})=>l("div",{class:"py-2 flex items-center gap-1",children:[$&&l("span",{class:"text-sm",children:[$,":"]}),l("button",{type:"button",role:"switch","aria-checked":s,"aria-label":$,onClick:()=>o(!s),class:`w-12 h-6 rounded-full px-1 flex items-center transition-colors ${s?"bg-blue-500":"bg-gray-200"}`,children:l("span",{class:`w-4 h-4 rounded-full bg-white transform transition-transform ${s?"translate-x-6":"translate-x-0"}`})})]});var ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mt(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ut={exports:{}};(function(s,o){(function($,h){s.exports=h()})(ht,function(){var $=1e3,h=6e4,D=36e5,m="millisecond",w="second",v="minute",p="hour",r="day",M="week",g="month",O="quarter",j="year",P="date",z="Invalid Date",Z=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,U=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,X={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(u){var n=["th","st","nd","rd"],t=u%100;return"["+u+(n[(t-20)%10]||n[t]||n[0])+"]"}},b=function(u,n,t){var i=String(u);return!i||i.length>=n?u:""+Array(n+1-i.length).join(t)+u},H={s:b,z:function(u){var n=-u.utcOffset(),t=Math.abs(n),i=Math.floor(t/60),e=t%60;return(n<=0?"+":"-")+b(i,2,"0")+":"+b(e,2,"0")},m:function u(n,t){if(n.date()<t.date())return-u(t,n);var i=12*(t.year()-n.year())+(t.month()-n.month()),e=n.clone().add(i,g),f=t-e<0,d=n.clone().add(i+(f?-1:1),g);return+(-(i+(t-e)/(f?e-d:d-e))||0)},a:function(u){return u<0?Math.ceil(u)||0:Math.floor(u)},p:function(u){return{M:g,y:j,w:M,d:r,D:P,h:p,m:v,s:w,ms:m,Q:O}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(u){return u===void 0}},I="en",a={};a[I]=X;var c="$isDayjsObject",k=function(u){return u instanceof A||!(!u||!u[c])},E=function u(n,t,i){var e;if(!n)return I;if(typeof n=="string"){var f=n.toLowerCase();a[f]&&(e=f),t&&(a[f]=t,e=f);var d=n.split("-");if(!e&&d.length>1)return u(d[0])}else{var S=n.name;a[S]=n,e=S}return!i&&e&&(I=e),e||!i&&I},x=function(u,n){if(k(u))return u.clone();var t=typeof n=="object"?n:{};return t.date=u,t.args=arguments,new A(t)},y=H;y.l=E,y.i=k,y.w=function(u,n){return x(u,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var A=function(){function u(t){this.$L=E(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[c]=!0}var n=u.prototype;return n.parse=function(t){this.$d=function(i){var e=i.date,f=i.utc;if(e===null)return new Date(NaN);if(y.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var d=e.match(Z);if(d){var S=d[2]-1||0,_=(d[7]||"0").substring(0,3);return f?new Date(Date.UTC(d[1],S,d[3]||1,d[4]||0,d[5]||0,d[6]||0,_)):new Date(d[1],S,d[3]||1,d[4]||0,d[5]||0,d[6]||0,_)}}return new Date(e)}(t),this.init()},n.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},n.$utils=function(){return y},n.isValid=function(){return this.$d.toString()!==z},n.isSame=function(t,i){var e=x(t);return this.startOf(i)<=e&&e<=this.endOf(i)},n.isAfter=function(t,i){return x(t)<this.startOf(i)},n.isBefore=function(t,i){return this.endOf(i)<x(t)},n.$g=function(t,i,e){return y.u(t)?this[i]:this.set(e,t)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(t,i){var e=this,f=!!y.u(i)||i,d=y.p(t),S=function(K,L){var R=y.w(e.$u?Date.UTC(e.$y,L,K):new Date(e.$y,L,K),e);return f?R:R.endOf(r)},_=function(K,L){return y.w(e.toDate()[K].apply(e.toDate("s"),(f?[0,0,0,0]:[23,59,59,999]).slice(L)),e)},T=this.$W,C=this.$M,N=this.$D,J="set"+(this.$u?"UTC":"");switch(d){case j:return f?S(1,0):S(31,11);case g:return f?S(1,C):S(0,C+1);case M:var B=this.$locale().weekStart||0,q=(T<B?T+7:T)-B;return S(f?N-q:N+(6-q),C);case r:case P:return _(J+"Hours",0);case p:return _(J+"Minutes",1);case v:return _(J+"Seconds",2);case w:return _(J+"Milliseconds",3);default:return this.clone()}},n.endOf=function(t){return this.startOf(t,!1)},n.$set=function(t,i){var e,f=y.p(t),d="set"+(this.$u?"UTC":""),S=(e={},e[r]=d+"Date",e[P]=d+"Date",e[g]=d+"Month",e[j]=d+"FullYear",e[p]=d+"Hours",e[v]=d+"Minutes",e[w]=d+"Seconds",e[m]=d+"Milliseconds",e)[f],_=f===r?this.$D+(i-this.$W):i;if(f===g||f===j){var T=this.clone().set(P,1);T.$d[S](_),T.init(),this.$d=T.set(P,Math.min(this.$D,T.daysInMonth())).$d}else S&&this.$d[S](_);return this.init(),this},n.set=function(t,i){return this.clone().$set(t,i)},n.get=function(t){return this[y.p(t)]()},n.add=function(t,i){var e,f=this;t=Number(t);var d=y.p(i),S=function(C){var N=x(f);return y.w(N.date(N.date()+Math.round(C*t)),f)};if(d===g)return this.set(g,this.$M+t);if(d===j)return this.set(j,this.$y+t);if(d===r)return S(1);if(d===M)return S(7);var _=(e={},e[v]=h,e[p]=D,e[w]=$,e)[d]||1,T=this.$d.getTime()+t*_;return y.w(T,this)},n.subtract=function(t,i){return this.add(-1*t,i)},n.format=function(t){var i=this,e=this.$locale();if(!this.isValid())return e.invalidDate||z;var f=t||"YYYY-MM-DDTHH:mm:ssZ",d=y.z(this),S=this.$H,_=this.$m,T=this.$M,C=e.weekdays,N=e.months,J=e.meridiem,B=function(L,R,G,tt){return L&&(L[R]||L(i,f))||G[R].slice(0,tt)},q=function(L){return y.s(S%12||12,L,"0")},K=J||function(L,R,G){var tt=L<12?"AM":"PM";return G?tt.toLowerCase():tt};return f.replace(U,function(L,R){return R||function(G){switch(G){case"YY":return String(i.$y).slice(-2);case"YYYY":return y.s(i.$y,4,"0");case"M":return T+1;case"MM":return y.s(T+1,2,"0");case"MMM":return B(e.monthsShort,T,N,3);case"MMMM":return B(N,T);case"D":return i.$D;case"DD":return y.s(i.$D,2,"0");case"d":return String(i.$W);case"dd":return B(e.weekdaysMin,i.$W,C,2);case"ddd":return B(e.weekdaysShort,i.$W,C,3);case"dddd":return C[i.$W];case"H":return String(S);case"HH":return y.s(S,2,"0");case"h":return q(1);case"hh":return q(2);case"a":return K(S,_,!0);case"A":return K(S,_,!1);case"m":return String(_);case"mm":return y.s(_,2,"0");case"s":return String(i.$s);case"ss":return y.s(i.$s,2,"0");case"SSS":return y.s(i.$ms,3,"0");case"Z":return d}return null}(L)||d.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(t,i,e){var f,d=this,S=y.p(i),_=x(t),T=(_.utcOffset()-this.utcOffset())*h,C=this-_,N=function(){return y.m(d,_)};switch(S){case j:f=N()/12;break;case g:f=N();break;case O:f=N()/3;break;case M:f=(C-T)/6048e5;break;case r:f=(C-T)/864e5;break;case p:f=C/D;break;case v:f=C/h;break;case w:f=C/$;break;default:f=C}return e?f:y.a(f)},n.daysInMonth=function(){return this.endOf(g).$D},n.$locale=function(){return a[this.$L]},n.locale=function(t,i){if(!t)return this.$L;var e=this.clone(),f=E(t,i,!0);return f&&(e.$L=f),e},n.clone=function(){return y.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},u}(),V=A.prototype;return x.prototype=V,[["$ms",m],["$s",w],["$m",v],["$H",p],["$W",r],["$M",g],["$y",j],["$D",P]].forEach(function(u){V[u[1]]=function(n){return this.$g(n,u[0],u[1])}}),x.extend=function(u,n){return u.$i||(u(n,A,x),u.$i=!0),x},x.locale=E,x.isDayjs=k,x.unix=function(u){return x(1e3*u)},x.en=a[I],x.Ls=a,x.p={},x})})(ut);var pt=ut.exports;const et=mt(pt),yt=3e4,$t=()=>{const[s,o]=rt(!1),[$,h]=rt("");st(()=>{const m=localStorage.getItem("lastKofiPrompt");if(!m||et().diff(et(m),"day")>=3){const w=setTimeout(()=>{o(!0),localStorage.setItem("lastKofiPrompt",et().format("YYYYMMDD"))},yt);return()=>clearTimeout(w)}},[]),st(()=>{h(s?"translate-y-0 opacity-100":"translate-y-2 opacity-0")},[s]);const D=Y(()=>{window.open("https://ko-fi.com/mk_tiling","_blank"),o(!1)},[]);return s?l("div",{class:`absolute bottom-4 right-4 transition-all duration-50 ${$}`,children:l("button",{class:"h-10 flex justify-center items-center rounded-full border md:border-2 border-neutral-900 bg-white px-3 text-neutral-900 hover:enabled:bg-blue-500 hover:enabled:text-white",onClick:D,children:["Enjoying exploring?",l("span",{class:"ml-1 font-bold",children:"Support on Ko-fi!"})]})}):null};function gt(s,o,$="application/octet-stream"){const h=new Blob([s],{type:$}),D=URL.createObjectURL(h),m=document.createElement("a");m.href=D,m.download=o,m.style.display="none",document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(D)}const bt=`0
SECTION
2
HEADER
0
ENDSEC
0
SECTION
2
TABLES
0
ENDSEC
0
SECTION
2
BLOCKS
0
ENDSEC
0
SECTION
2
ENTITIES`,xt=`0
ENDSEC
0
EOF`;function vt(s){return[bt,"0","LWPOLYLINE","8","0","90",`${s.length}`,"70","1",...s.map(([$,h])=>["10",$.toFixed(6),"20",h.toFixed(6)]).flat(),xt].join(`
`)}const lt=(s,o)=>s%o?lt(o,s%o):o,F=(s,o=0)=>Array.from({length:s},($,h)=>o+h),Mt=({x:s,y:o})=>`l${s.toFixed(4)} ${o.toFixed(4)}`,wt=({x:s,y:o,r:$,sweep:h=!1})=>`a${$.toFixed(4)} ${$.toFixed(4)} 0 0 ${h?1:0} ${s.toFixed(4)} ${o.toFixed(4)}`,nt=(s,o)=>`translate(${s.toFixed(4)} ${o.toFixed(4)})`,St=s=>`rotate(${s.toFixed(4)})`,Dt=({m:s,k:o,n:$,offset:h,arc:D,unit:m,layer:w})=>{const v=lt(s,o),p=s/v,r=o/v,M=$/v,g=W(()=>F(M).map(a=>m*Math.cos(2*Math.PI*a/M)),[M,m]),O=W(()=>F(M).map(a=>m*Math.sin(2*Math.PI*a/M)),[M,m]),j=W(()=>F(r).map(a=>g[a]).reduce((a,c)=>a+c),[r,g]),P=W(()=>F(r).map(a=>O[a]).reduce((a,c)=>a+c),[r,O]),z=W(()=>g[r]-g[0],[r,g]),Z=W(()=>O[r]-O[0],[r,O]),U=m/2/Math.sin(p*Math.PI/M),X=W(()=>{const a=D?wt:Mt;return[...F(r).map(c=>a({x:g[c*p%r],y:O[c*p%r],r:U,sweep:!0})),a({x:g[r],y:O[r],r:U,sweep:!0}),a({x:-g[0],y:-O[0],r:U}),...F(r-1,1).map(c=>a({x:-g[(r-c)*p%r],y:-O[(r-c)*p%r],r:U})),a({x:-g[r],y:-O[r],r:U})].join("")},[p,r,D,g,O,U]),b=Y(a=>{const c=F(r).findIndex(k=>k*p%r==a%r);return F(c>=0?c:0).reduce(({x:k,y:E},x)=>({x:k+g[((x*p+r-a%r)%r+a)%M],y:E+O[((x*p+r-a%r)%r+a)%M]}),{x:0,y:0})},[p,r,M,g,O]),H=W(()=>{const a=2*Math.PI/M;return[...F(r).map(c=>[Math.cos(c*p%r*a),Math.sin(c*p%r*a)]),[Math.cos(r*a),Math.sin(r*a)],[-1,0],...F(r-1,1).map(c=>[-Math.cos((r-c)*p%r*a),-Math.sin((r-c)*p%r*a)])].reduce((c,[k,E])=>{const[x,y]=c.at(-1);return[...c,[x+k,y+E]]},[[0,0]])},[p,r,M]),I=Y(()=>{gt(vt(H),"tile.dxf","application/dxf")},[H]);return l(ft,{children:[l("div",{class:"relative -mx-4 md:mx-0 mb-1 md:mb-2",children:[l("svg",{viewBox:"-400 -400 800 800",class:"w-full h-auto",children:[l("rect",{x:"-400",y:"-400",width:"800",height:"800",class:"fill-blue-50"}),l("defs",{children:[l("path",{id:"prototile",d:`M0 0${X}z`}),l("g",{id:"wedge",children:F(w).map(a=>F(a+1).map(c=>l("g",{transform:nt(a*j+c*z,a*P+c*Z),children:l("use",{href:"#prototile"})})))})]}),l("g",{class:"stroke-2 stroke-neutral-900 fill-white","stroke-linejoin":"round",transform:`scale(1 -1) ${nt(h?-m/2:0,0)}`,children:F(M).map(a=>{const{sx:c,sy:k}=(()=>{if(h&&2*a>=M){const{x:E,y:x}=b(a-M/2);return{sx:m-E,sy:-x}}else{const{x:E,y:x}=b(a);return{sx:E,sy:x}}})();return l("g",{transform:`${nt(c,k)} ${St(360*a/M)}`,children:l("use",{href:"#wedge",class:"hover:fill-blue-500"})})})})]}),l($t,{})]}),l("div",{class:"relative mb-1 md:mb-2 flex justify-center items-center",children:[l("span",{children:["(m, k, n) = (",s,", ",o,", ",$,")",v>1&&"*"]}),l("a",{class:"absolute right-0 px-1 cursor-pointer hidden md:inline",onClick:I,children:"DXF"})]})]})},ot={k:[2,50],t:[2,10],unit:[5,50,5],layer:[1,10]},ct=(s,o,$,h)=>o<=s&&s<=$&&(h==null||h>0&&(s-o)%h==0),_t=()=>{const[s,o]=rt({m:3,k:7,t:2,offset:!1,arc:!1,unit:20,layer:3}),$=Y(b=>{const{m:H,k:I,t:a,offset:c,arc:k,unit:E,layer:x}=b,y=new URLSearchParams(Object.fromEntries(Object.entries({m:H,k:I,t:a,offset:c,arc:k,unit:E,layer:x}).filter(A=>A[1]!=null).map(([A,V])=>[A,V.toString()]))).toString();y!==location.hash&&history.replaceState(null,"",`#${y}`)},[]);st(()=>{const b=location.hash.replace(/^#/,""),{m:H,...I}=Object.fromEntries(new URLSearchParams(b).entries()),a=Object.fromEntries(Object.entries(I).map(([c,k])=>{if(["offset","arc"].includes(c))return["true","false"].includes(k)?[c,k==="true"]:void 0;if(!Object.keys(ot).includes(c)||!k.match(/\d+/))return null;const E=Number(k),[x,y,A]=ot[c];return ct(E,x,y,A)?[c,E]:null}).filter(c=>c!=null));if(H?.match(/\d+/)){const c=Number(H);ct(c,1,(a.k??s.k)-1)&&(a.m=c)}Object.keys(a).length>0&&o(c=>({...c,...a})),$(a)},[]);const h=Y(b=>{o(I=>({...I,...b}));const H=location.hash.replace(/^#/,"");$(Object.fromEntries([...new URLSearchParams(H).entries(),...Object.entries(b)]))},[]),{m:D,k:m,t:w,offset:v,arc:p,unit:r,layer:M}=s,g=v?2*(w*m-D):w*m,O=Y(b=>{b<m&&h({m:b})},[m]),j=Y(b=>{D>=b?h({m:b-1,k:b}):h({k:b})},[D]),P=Y(b=>{h({t:b})},[]),z=Y(b=>{h({offset:b})},[]),Z=Y(b=>{h({arc:b})},[]),U=Y(b=>{h({unit:b})},[]),X=Y(b=>{h({layer:b})},[]);return{m:D,k:m,t:w,n:g,offset:v,arc:p,unit:r,layer:M,setM:O,setK:j,setT:P,setOffset:z,setArc:Z,setUnit:U,setLayer:X}},Tt=()=>{const{m:s,k:o,t:$,n:h,offset:D,arc:m,unit:w,layer:v,setM:p,setK:r,setT:M,setOffset:g,setArc:O,setUnit:j,setLayer:P}=_t();return l("div",{children:[l(Dt,{m:s,k:o,n:h,offset:D,arc:m,unit:w,layer:v}),l("div",{class:"flex flex-col items-center",children:l("div",{class:"w-full max-w-[480px] flex flex-col gap-1 md:gap-2",children:[l(Q,{label:"m",value:s,min:1,max:o-1,onChange:p}),l(Q,{label:"k",value:o,min:2,max:50,onChange:r}),l(Q,{label:"t",value:$,min:2,max:10,onChange:M}),l("div",{class:"w-full flex justify-evenly",children:[l(it,{label:"offset",enabled:D,onToggle:g}),l(it,{label:"arc",enabled:m,onToggle:O})]}),l("hr",{class:"my-1 md:my-2"}),l(Q,{label:"unit",value:w,min:5,max:50,step:5,onChange:j}),l(Q,{label:"layer",value:v,min:1,max:10,onChange:P})]})})]})};export{Tt as Playground};
